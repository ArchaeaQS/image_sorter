# 画像分類アプリケーション 要件定義

## 基本要件

### 機能要件

**対象画像：**

- 画像分類モデル用のデータセット作成が目的
- テキスト画像など、特定のカテゴリに分類したい画像を扱う

**分類基準：**

- テキスト画像内での詳細分類を実施
- カテゴリはあらかじめ決定済み
- 設定タブでカテゴリの設定・変更が可能
- 1 つの画像につき 1 つのラベルのみ適用
- 全ての画像に必ずラベルが適用される（未分類は存在しない）

**分類方法：**

- 手動分類のみ（データセット作成のため）
- 一人での作業を想定

**アプリケーション機能：**

- 画像のグリッド表示
- 画像クリック（左クリック・右クリック）によるラベルのトグル機能
  - 左クリック：順方向にラベルをトグル
  - 右クリック：逆方向にラベルをトグル
- クラス変更による画像枠の色変更（初期状態は無色）
- 分類ボタンによる画像パス・クラス情報のバックエンド送信
- 分類実行後、自動的に次の 100 枚を表示
- 設定での対象フォルダ指定機能
- クラス名でのフォルダ自動作成・ファイル移動
- 分類済み画像は対象フォルダから移動（消去）
- Undo ボタンによるファイル移動の取り消し機能

### 非機能要件

**パフォーマンス要件：**

- 画像の読み込み・表示：ユーザーのストレスにならない範囲で実行
- キャッシュ・メモリ管理：適切に実装
- ファイル移動処理：非同期処理により実行
- UI 側でのフリーズ防止

**エラー処理：**

- 適切なエラーハンドリングを実装
- 重複ファイル名は発生しない（同一フォルダからの分類のため）
- その他のエラーは適切に処理

## 技術要件

**プラットフォーム：**

- Windows デスクトップアプリケーション

**技術スタック：**

- フロントエンド：Electron + React + TypeScript
- バックエンド：FastAPI + Python (uv管理)
- Electron-FastAPI間通信：HTTP REST API
- パッケージ管理：npm (フロントエンド), uv (バックエンド)
- ビルドツール：Webpack (React), TypeScript Compiler (Electron main)
- コード品質：Black, Flake8 (Python), TypeScript (型チェック)

## ユーザーインターフェース要件

**メイン画面：**

- 画像のグリッド表示
- 画像クリックによるラベル切り替え
- クラスに応じた枠色の視覚的フィードバック
- 分類実行ボタン
- Undo ボタン

**設定画面：**

- 設定タブまたは設定ポップアップでの管理
- 対象フォルダの指定
- クラス/ラベルの個別追加・削除・順番入れ替え機能
- グリッド表示の列数・行数設定（初期値10×10）

## データ要件

**画像処理規模：**

- 一度に表示・分類：約 100 枚程度
- 全体の処理対象：数千枚〜数万枚の画像
- グリッド表示の列数・行数はユーザー設定可能（初期値10×10）

**データ永続化：**

- 設定ファイル：JSON/YAML 形式で適切な場所に保存
- 起動時の設定復元：前回設定の自動読み込み
- 起動時の画像リスト取得：対象フォルダの画像ファイルパス一覧を取得
- 進捗管理：起動中の処理状況を適切に管理・表示
- 進捗の永続化：不要（起動時にリスト取得するため）
- Undo 機能：最後の移動操作のみ取り消し可能

**対応画像形式：**

- JPG/JPEG
- PNG
- サムネイル表示時の自動リサイズ機能
- ファイルサイズ・解像度制限なし（当面）

**セキュリティ・プライバシー：**

- ローカルファイルのみの処理
- 外部への画像データ送信なし
